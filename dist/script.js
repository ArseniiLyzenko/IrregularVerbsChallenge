"use strict";var bringItOn_btn,verbs_form,rusVerb_div,rusVerb_p,v1_input,v2_input,v3_input,submitVerbs_btn,reset_btn,giveUp_btn,gameOver_p,score_p,name_input,submitName_btn,backToIntro_btn,sectionOne_section,sectionTwo_section,sectionThree_section,scoreTable_div,span='<span id="carriage">&nbsp;</span>',couldNotLoad='[["1","null","null","null","Could not load the table of irregular verbs :("]]',irregularVerbsJsonFile="verbs100array.json",gameOver="Game Over",wellPlayed="Well Played!",typingSpeed=100,untypingSpeed=70;function onLoad(){bringItOn_btn=document.getElementById("bring-it-on_btn"),verbs_form=document.getElementById("verbs_form"),rusVerb_div=document.getElementById("rus-verb_div"),rusVerb_p=document.getElementById("verb-rus_p"),v1_input=document.getElementById("v1_input"),v2_input=document.getElementById("v2_input"),v3_input=document.getElementById("v3_input"),submitVerbs_btn=document.getElementById("submit-verbs_btn"),reset_btn=document.getElementById("reset_btn"),giveUp_btn=document.getElementById("give-up_btn"),gameOver_p=document.getElementById("game-over_p"),score_p=document.getElementById("score_p"),name_input=document.getElementById("name_input"),submitName_btn=document.getElementById("submit-name_btn"),backToIntro_btn=document.getElementById("back-to-intro_btn"),sectionOne_section=document.getElementById("section-one_section"),sectionTwo_section=document.getElementById("section-two_section"),sectionThree_section=document.getElementById("section-three_section"),scoreTable_div=document.getElementById("score-table_div")}var verb=function(e){var t;return{get:function(){return t},set:function(e){t=e}}}(),score=function(){var e=0;return{get:function(){return e},plusPlus:function(){e++},reset:function(){e=0}}}(),verbs=function(){var e,t=new XMLHttpRequest;return t.onreadystatechange=function(){e=4==this.readyState&&200==this.status?JSON.parse(this.responseText):JSON.parse(couldNotLoad)},t.open("GET",irregularVerbsJsonFile,!0),t.send(),{get:function(){return e},length:function(){return e.length}}}(),newVerbsOnly=function(e){var n=verbs.get().slice();return{get:function(){return n},reSet:function(){n=verbs.get().slice(),console.log("newVerbsOnly.reSet();")},length:function(){return n.length},splice:function(e,t){n.splice(e,t)},setVerb:function(e){this.pickVerb(this.randVerbID()),console.log("picked_verb_id: "+verb.get()[0]+" "+verb.get()[1]+" "+verb.get()[2]+" "+verb.get()[3]),setTimeout(function(){typingAnimation(rusVerb_p,verb.get()[4],typingSpeed)},100*(rusVerb_p.innerHTML.length-span.length))},pickVerb:function(e){newVerbsOnly.get();verb.set(newVerbsOnly.get()[e]),newVerbsOnly.splice(e,1)},randVerbID:function(){return Math.floor(Math.random()*newVerbsOnly.length())}}}();function typingAnimation(n,o,r){console.log("typingAnimation("+n.id+', "'+o+'", '+r+")"),function e(t){console.log("typeWriter("+t+") : "+o.substring(0,t+1)),t<o.length&&(n.innerHTML=o.substring(0,t+1)+span,setTimeout(function(){e(t+1)},r))}(0)}function untypingAnimation(n,o){console.log("untypingAnimation("+n.id+", "+o+")"),function e(){var t=n.innerHTML.substring(0,n.innerHTML.length-span.length-1);console.log("untypeWriter(): "+t),span.length<n.innerHTML.length&&(n.innerHTML=t+span,setTimeout(function(){e()},o))}()}function isTypingSpaceClear(e){return e.innerHTML==span}function bringItOn(){resetVerbInputs(),newVerbsOnly.reSet(),scrollToGameAreaSector(),isTypingSpaceClear(rusVerb_p)?setTimeout(function(){newVerbsOnly.setVerb()},1e3):(setTimeout(function(){untypingAnimation(rusVerb_p,untypingSpeed)},1500),setTimeout(function(){newVerbsOnly.setVerb()},1500)),sectionOne_section.style.display="none"}function submitVerbs(){for(var e=0;e<3;e++){if(verbs_form.elements[e].validity.valueMissing)return void alert("value Missing");if(verbs_form.elements[e].validity.patternMismatch)return void alert("pattern Mismatch")}for(e=0;e<3;e++)if(verb.get()[e+1]!=verbs_form.elements[e].value.toLowerCase().trim())return void giveUp();score.plusPlus(),0!=newVerbsOnly.length()?(untypingAnimation(rusVerb_p,untypingSpeed),newVerbsOnly.setVerb(),resetVerbInputs()):win()}function win(){console.log("win()"),requestScoreTable(),gameOver_p.innerHTML=wellPlayed,score_p.innerHTML=score.get(),newVerbsOnly.reSet(),scrollToGameOverSector(),sectionTwo_section.style.display="none"}function giveUp(){console.log("giveUp()"),requestScoreTable(),gameOver_p.innerHTML=gameOver,score_p.innerHTML=score.get(),newVerbsOnly.reSet(),scrollToGameOverSector(),sectionTwo_section.style.display="none"}function submitNameAndScore(){var e;if(0==score.get())return(e=document.getElementById("score-zero-popup_span")).classList.toggle("showPopup"),void setTimeout(function(){e.classList.toggle("showPopup")},3e3);if(""==name_input.value.trim())return(e=document.getElementById("empty-name-popup_span")).classList.toggle("showPopup"),void setTimeout(function(){e.classList.toggle("showPopup")},3e3);var t,n,o;t={name:name_input.value.trim(),score:score.get()},n=JSON.stringify(t),console.log("dbParams_json = "+n),(o=xmlhttp_()).open("POST","json_score_tabl_db_post.php",!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.send("dbParams_json="+n)}function backToIntro(){score.reset(),scrollToIntroSector(),sectionThree_section.style.display="none"}function resetVerbInputs(){reset_btn.click()}function scrollToIntroSector(e){console.log("scrollToIntroSector()"),sectionOne_section.style.display="flex"}function scrollToGameAreaSector(e){console.log("scrollToGameAreaSector()"),sectionTwo_section.style.display="flex"}function scrollToGameOverSector(e){console.log("scrollToGameOverSector()"),sectionThree_section.style.display="flex"}function requestScoreTable(){var e;(e=xmlhttp_()).open("GET","json_score_tabl_db_get.php",!0),e.send()}function xmlhttp_(){var i,e=new XMLHttpRequest;return e.onreadystatechange=function(){console.log("readyState = "+this.readyState),console.log("status = "+this.status),4==this.readyState&&200==this.status?(console.log("responseText = "+this.responseText),i=JSON.parse(this.responseText),scoreTable_div.innerHTML=function(){var t,e,n=0,o=[],r="<table id='score_table'>                    <thead>                        <tr>                            <th>#</th>                            <th>Name</th>                            <th>Score</th>                            <th>Date</th>                        </tr>                    </thead>                    <tbody id='score_table_body'>";for(t in i)console.log(o),console.log("resultQuery_obj[iterator].name = "+i[t].name),o.find(s)||(console.log("resultQuery_obj[iterator].date = "+i[t].date),e=new Date(i[t].date),r+="<tr><td>"+ ++n+"</td><td>"+i[t].name+"</td><td>"+i[t].score+"</td><td>"+formatDate(e)+"</td></tr>",o.push(i[t].name));return r;function s(e){return e==i[t].name}}()):4==this.readyState&&200!=this.status&&(scoreTable_div.innerHTML="<p>Could not load table of recors :(</p>")},e}function formatDate(e){var t=e.getDate(),n=e.getMonth(),o=e.getFullYear();return t+" "+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][n]+" "+o}